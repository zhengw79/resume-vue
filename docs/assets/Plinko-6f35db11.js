var m=Object.defineProperty;var p=(i,l,e)=>l in i?m(i,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[l]=e;var s=(i,l,e)=>(p(i,typeof l!="symbol"?l+"":l,e),e);import{B as b}from"./BackButton-6ec0ce47.js";import{P as o}from"./phaser-5dbb4e54.js";import{o as u,a as _,c as v,b as f,h as w,d as S}from"./index-627aca7e.js";class k extends o.Scene{constructor(){super("game");s(this,"platforms");s(this,"reuslt","");s(this,"start",!1);s(this,"ball")}init(){this.result=""}preload(){this.load.json("shapes","assets/imgs/plinko/rollingball-shapes.json")}create(){this.add.tileSprite(0,0,this.scale.width*2,this.scale.height*2,"rollingball","background_blue.png").setScale(1,1);const e=this.cache.json.get("shapes");for(let t=0;t<5;t++)this.matter.add.image(16,64+128*t,"rollingball","block_narrow.png",{isStatic:!0});for(let t=0;t<5;t++)this.matter.add.image(16,40+120*t,"rollingball","block_corner.png",{isStatic:!0}).setAngle(-135).setScale(.8);for(let t=0;t<5;t++)this.matter.add.image(485,64+128*t,"rollingball","block_narrow.png",{isStatic:!0});for(let t=0;t<5;t++)this.matter.add.image(485,40+120*t,"rollingball","block_corner.png",{isStatic:!0}).setAngle(45).setScale(.8);for(let t=0;t<5;t++)for(let a=0;a<5;a++)this.matter.add.image(95+a*72,40+t*120,"rollingball","particle_3.png",{shape:e.particle_3}).setScale(.4);for(let t=0;t<4;t++)for(let a=0;a<6;a++)this.matter.add.image(75+a*70,100+t*120,"rollingball","particle_3.png",{isStatic:!0,shape:e.particle_3}).setScale(.4);for(let t=0;t<5;t++)this.matter.add.image(90+t*80,630,"rollingball","laser.png",{shape:e.laser});for(let t=0;t<5;t++)this.matter.add.image(45+128*t,625,"rollingball","block_narrow.png",{isStatic:!0}).setAngle(90);this.matter.add.image(25,613,"rollingball","block_corner.png",{shape:e.block_corner}),this.matter.add.image(475,613,"rollingball","block_corner.png",{shape:e["block_corner (2)"]}).setFlipX(!0),this.ball=this.matter.add.image(o.Math.RND.realInRange(this.scale.width*1/6,this.scale.width*5/6),0,"rollingball","ball_red_small.png"),this.ball.setBody({type:"circle",radius:24*.7}),this.ball.setAngularVelocity(0),this.ball.setBounce(.45),this.ball.setFriction(0,0,0),this.ball.setFrictionAir(0);const r=this.matter.add.image(55,590,"rollingball","number_1.png").setOnCollideWith(this.ball,()=>{this.result="prize 1",this.matter.world.remove(r),this.goToGameOver("prize 1")}),n=this.matter.add.image(130,590,"rollingball","number_2.png").setOnCollideWith(this.ball,()=>{this.result="prize 2",this.matter.world.remove(n),this.goToGameOver("prize 2")}),h=this.matter.add.image(210,590,"rollingball","number_3.png").setOnCollideWith(this.ball,()=>{this.result="prize 3",this.matter.world.remove(h),this.goToGameOver("prize 3")}),c=this.matter.add.image(290,590,"rollingball","number_4.png").setOnCollideWith(this.ball,()=>{this.result="prize 4",this.matter.world.remove(c),this.goToGameOver("prize 4")}),d=this.matter.add.image(370,590,"rollingball","number_5.png").setOnCollideWith(this.ball,()=>{this.result="prize 5",this.matter.world.remove(d),this.goToGameOver("prize 5")}),g=this.matter.add.image(445,590,"rollingball","number_6.png").setOnCollideWith(this.ball,()=>{this.result="prize 6",this.matter.world.remove(g),this.goToGameOver("prize 6")})}goToGameOver(e){setTimeout(()=>{this.add.image(this.scale.width/2,this.scale.height/2,"rollingball","block_large.png").setAngle(90).setScale(2.5);const r=this.add.text(this.scale.width/4+40,this.scale.height/2-25,`Congratulations!
You win ${e}`,{align:"center"}).setInteractive().on("pointerdown",()=>{this.scene.restart()});this.add.text(r.x+40,r.y+50,"Re-play",{align:"center"}).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.scene.restart()})},1e3)}}class y extends o.Scene{constructor(){super("game-start");s(this,"start",!1)}preload(){this.load.atlas("rollingball","assets/imgs/plinko/rollingball.png","assets/imgs/plinko/rollingball.json")}create(){this.add.tileSprite(0,0,this.scale.width*2,this.scale.height*2,"rollingball","background_green.png"),this.add.text(this.scale.width/4+10,this.scale.height*1/4,`Click Start to
Play Plinko`,{align:"center",color:"black",fontSize:"25px"}),this.add.image(256,this.scale.height*3/4,"rollingball","button_blue.png").setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.scene.start("game")}),this.add.text(235,this.scale.height*3/4-10,"START")}}const x={class:"container-fluid"},z=w('<div class="row"><div id="game" class="col-12 col-sm-12 col-md-12 col-lg-7 col-xl-7"><canvas id="canvas" class="rounded shadow" width="500" height="640"></canvas></div><div class="col-12 col-sm-12 col-md-12 col-lg-5 col-xl-5 text-primary"><h4>How to play?</h4><ul><li>Click &quot;Start&quot; button to play.</li><li>If the ball stopped by a pin, please refresh the page to restart.</li></ul><h4>Features</h4><ul><li>Phaser Game Engine</li><li>MatterJS - Comprehensive physics engine.</li><li>PhysicsEditor - Physics edtor for 2D collision shapes</li></ul></div></div>',1),A={__name:"Plinko",setup(i){let l;return u(()=>{const e={type:o.CANVAS,parent:"game",width:500,height:640,canvas:document.getElementById("canvas"),render:{antialias:!0,antialiasGL:!0},scene:[y,k],physics:{default:"matter",matter:{debug:!1,gravity:{y:.7}}}};l=new o.Game(e)}),_(()=>{l.destroy(!0,!1)}),(e,r)=>(S(),v("div",x,[f(b),z]))}};export{A as default};
