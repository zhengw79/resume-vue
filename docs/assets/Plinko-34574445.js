var p=Object.defineProperty;var b=(i,l,t)=>l in i?p(i,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[l]=t;var r=(i,l,t)=>(b(i,typeof l!="symbol"?l+"":l,t),t);import{P as n,B as u}from"./phaser-a4bd8bf9.js";import{o as _,a as f,c as v,b as w,f as a,d as k}from"./index-20a5fd13.js";class S extends n.Scene{constructor(){super("game");r(this,"platforms");r(this,"reuslt","");r(this,"start",!1);r(this,"ball")}init(){this.result=""}preload(){this.load.json("shapes","assets/imgs/plinko/rollingball-shapes.json")}create(){this.add.tileSprite(0,0,this.scale.width*2,this.scale.height*2,"rollingball","background_blue.png").setScale(1,1);const t=this.cache.json.get("shapes");for(let e=0;e<5;e++)this.matter.add.image(16,64+128*e,"rollingball","block_narrow.png",{isStatic:!0});for(let e=0;e<5;e++)this.matter.add.image(16,40+120*e,"rollingball","block_corner.png",{isStatic:!0}).setAngle(-135).setScale(.8);for(let e=0;e<5;e++)this.matter.add.image(485,64+128*e,"rollingball","block_narrow.png",{isStatic:!0});for(let e=0;e<5;e++)this.matter.add.image(485,40+120*e,"rollingball","block_corner.png",{isStatic:!0}).setAngle(45).setScale(.8);for(let e=0;e<5;e++)for(let s=0;s<5;s++)this.matter.add.image(95+s*72,40+e*120,"rollingball","particle_3.png",{shape:t.particle_3}).setScale(.4);for(let e=0;e<4;e++)for(let s=0;s<6;s++)this.matter.add.image(75+s*70,100+e*120,"rollingball","particle_3.png",{isStatic:!0,shape:t.particle_3}).setScale(.4);for(let e=0;e<5;e++)this.matter.add.image(90+e*80,630,"rollingball","laser.png",{shape:t.laser});for(let e=0;e<5;e++)this.matter.add.image(45+128*e,625,"rollingball","block_narrow.png",{isStatic:!0}).setAngle(90);this.matter.add.image(25,613,"rollingball","block_corner.png",{shape:t.block_corner}),this.matter.add.image(475,613,"rollingball","block_corner.png",{shape:t["block_corner (2)"]}).setFlipX(!0),this.ball=this.matter.add.image(n.Math.RND.realInRange(this.scale.width*1/6,this.scale.width*5/6),0,"rollingball","ball_red_small.png"),this.ball.setBody({type:"circle",radius:24*.7}),this.ball.setAngularVelocity(0),this.ball.setBounce(.45),this.ball.setFriction(0,0,0),this.ball.setFrictionAir(0);const o=this.matter.add.image(55,590,"rollingball","number_1.png").setOnCollideWith(this.ball,()=>{this.result="prize 1",this.matter.world.remove(o),this.goToGameOver("prize 1")}),h=this.matter.add.image(130,590,"rollingball","number_2.png").setOnCollideWith(this.ball,()=>{this.result="prize 2",this.matter.world.remove(h),this.goToGameOver("prize 2")}),c=this.matter.add.image(210,590,"rollingball","number_3.png").setOnCollideWith(this.ball,()=>{this.result="prize 3",this.matter.world.remove(c),this.goToGameOver("prize 3")}),g=this.matter.add.image(290,590,"rollingball","number_4.png").setOnCollideWith(this.ball,()=>{this.result="prize 4",this.matter.world.remove(g),this.goToGameOver("prize 4")}),d=this.matter.add.image(370,590,"rollingball","number_5.png").setOnCollideWith(this.ball,()=>{this.result="prize 5",this.matter.world.remove(d),this.goToGameOver("prize 5")}),m=this.matter.add.image(445,590,"rollingball","number_6.png").setOnCollideWith(this.ball,()=>{this.result="prize 6",this.matter.world.remove(m),this.goToGameOver("prize 6")})}goToGameOver(t){setTimeout(()=>{this.add.image(this.scale.width/2,this.scale.height/2,"rollingball","block_large.png").setAngle(90).setScale(2.5);const o=this.add.text(this.scale.width/4+40,this.scale.height/2-25,`Congratulations!
You win ${t}`,{align:"center"}).setInteractive().on("pointerdown",()=>{this.scene.restart()});this.add.text(o.x+40,o.y+50,"Re-play",{align:"center"}).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.scene.restart()})},1e3)}}class y extends n.Scene{constructor(){super("game-start");r(this,"start",!1)}preload(){this.load.atlas("rollingball","assets/imgs/plinko/rollingball.png","assets/imgs/plinko/rollingball.json")}create(){this.add.tileSprite(0,0,this.scale.width*2,this.scale.height*2,"rollingball","background_green.png"),this.add.text(this.scale.width/4+10,this.scale.height*1/4,`Click Start to
Play Plinko`,{align:"center",color:"black",fontSize:"25px"}),this.add.image(256,this.scale.height*3/4,"rollingball","button_blue.png").setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.scene.start("game")}),this.add.text(235,this.scale.height*3/4-10,"START")}}const x={class:"container-fluid"},z=a("div",{class:"row"},[a("div",{id:"game",class:"col-12 col-sm-12 col-md-12 col-lg-7 col-xl-7"},[a("canvas",{id:"canvas",class:"rounded shadow",width:"500",height:"640"})]),a("div",{class:"col-12 col-sm-12 col-md-12 col-lg-5 col-xl-5 text-primary"},[a("p",null,"Features"),a("ul",null,[a("li",null,"Phaser Game Engine"),a("li",null,"MatterJS - Comprehensive physics engine."),a("li",null,"PhysicsEditor - Physics edtor for 2D collision shapes"),a("li",null,"If the ball stopped by a pin, please refresh the page to restart.")])])],-1),T={__name:"Plinko",setup(i){let l;return _(()=>{const t={type:n.CANVAS,parent:"game",width:500,height:640,canvas:document.getElementById("canvas"),render:{antialias:!0,antialiasGL:!0},scene:[y,S],physics:{default:"matter",matter:{debug:!1,gravity:{y:.7}}}};l=new n.Game(t)}),f(()=>{l.destroy(!0,!1)}),(t,o)=>(k(),v("div",x,[w(u),z]))}};export{T as default};
